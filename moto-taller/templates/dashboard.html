<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moto-Taller - Sistema de Gestión</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="dashboard-container">

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <i class="fas fa-motorcycle"></i>
                <span>Moto-Taller</span>
            </div>
            <nav class="sidebar-nav">

                <!-- Administrador y Asesor pueden gestionar clientes -->
                {% if session['rol'] in ['administrador', 'asesor'] %}
                <a href="#" class="nav-link active" data-section="clientes">
                    <i class="fas fa-users"></i>
                    <span>Clientes</span>
                </a>
                {% endif %}

                <!-- Administrador, Asesor y Técnico pueden ver órdenes -->
                {% if session['rol'] in ['administrador', 'asesor', 'tecnico'] %}
                <a href="#" class="nav-link" data-section="ordenes">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Órdenes</span>
                </a>
                {% endif %}

                    <a href="#" class="nav-link" data-section="encuesta">
                       <i class="fas fa-comments"></i>
                       <span>Encuesta</span>
                    </a>

                <!-- Solo el Administrador puede gestionar servicios -->
                {% if session['rol'] == 'administrador' %}
                <a href="#" class="nav-link" data-section="servicios">
                    <i class="fas fa-tools"></i>
                    <span>Servicios</span>
                </a>

                <!-- Administrador y Asesor pueden gestionar Factura -->
                {% if session['rol'] in ['administrador', 'asesor'] %}
                <a href="#" id="menu-facturacion" class="nav-link active" data-section="factura">
                    <i class="fas fa-file-invoice"></i>
                    <span>Facturación</span>
                </a>

                {% endif %}




                <!-- Solo el Administrador puede ver reportes -->
                <a href="#" class="nav-link" data-section="reportes">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reportes</span>
                </a>

                <!-- Solo el Administrador puede acceder a configuración -->
                <a href="#" class="nav-link" data-section="configuracion">
                    <i class="fas fa-cog"></i>
                    <span>Configuración</span>
                </a>
                {% endif %}
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">

            <!-- Sección: Gestión de Clientes -->
            <!-- Visible para: Administrador y Asesor -->
            {% if session['rol'] in ['administrador', 'asesor'] %}
            <section class="content-section" id="clientes-section">
                <header class="content-header">
                    <h1><i class="fas fa-users"></i> Gestión de Clientes</h1>
                    <div class="header-actions">
                        <div class="search-bar">
                            <input type="text" placeholder="Buscar cliente...">
                            <button class="search-btn"><i class="fas fa-search"></i></button>
                        </div>

                        <!-- Botón "Nuevo Cliente" solo visible para Administrador -->
                        {% if session['rol'] == 'administrador' %}
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i> Nuevo Cliente
                        </button>
                        {% endif %}
                    </div>
                </header>

                <div class="card">
                    <div class="table-responsive">
                        <table class="data-table">
                            <!-- Tabla de clientes aquí... -->
                        </table>
                    </div>
                    <div class="table-footer">
                        <div class="pagination">
                            <!-- Paginación aquí... -->
                        </div>
                    </div>
                </div>
            </section>
            {% endif %}

            <!-- Sección: Gestión de Órdenes -->
            <!-- Visible para: Administrador, Asesor y Técnico -->
           <!-- Sección: Gestión de Órdenes -->
<!-- Visible para: Administrador, Asesor y Técnico -->
{% if session['rol'] in ['administrador', 'asesor', 'tecnico'] %}
<section class="content-section hidden" id="ordenes-section">
    <header class="content-header">
        <h1><i class="fas fa-clipboard-list"></i> Gestión de Órdenes</h1>
        <div class="header-actions">
            <div class="search-bar">
                <input type="text" placeholder="Buscar órdenes...">
                <button class="search-btn"><i class="fas fa-search"></i></button>
            </div>

            <!-- Crear orden: solo Administrador y Asesor -->
            {% if session['rol'] in ['administrador', 'asesor'] %}
            <a href="{{ url_for('orden.nueva_orden') }}" class="btn btn-primary">
                <i class="fas fa-plus"></i> Nueva Orden
            </a>
            {% endif %}
        </div>
    </header>

    <div class="card">
        <div class="order-cards">
            {% for orden in ordenes %}
            <div class="order-card status-{{ orden.estado | lower }}">
                <div class="order-header">
                    <span class="order-id">#ORD-{{ orden.id }}</span>
                    <span class="order-status">{{ orden.estado }}</span>
                </div>
                <div class="order-body">
                    <div class="order-info">
                        <span><i class="fas fa-user"></i> {{ orden.cliente.nombre }}</span>
                        <span><i class="fas fa-motorcycle"></i> {{ orden.moto.modelo }}</span>
                        <span><i class="fas fa-calendar"></i> {{ orden.fecha_entrada.strftime('%d/%m/%Y') }}</span>
                    </div>
                    <div class="order-actions">
                        <a href="#" class="btn btn-sm btn-icon" title="Ver"><i class="fas fa-eye"></i></a>
                        <a href="#" class="btn btn-sm btn-icon" title="Editar"><i class="fas fa-edit"></i></a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}


            <!-- Sección: Servicios -->
            <!-- Visible solo para: Administrador -->
            {% if session['rol'] == 'administrador' %}
            <section class="content-section hidden" id="servicios-section">
                <header class="content-header">
                    <h1><i class="fas fa-tools"></i> Servicios</h1>
                    <!-- Contenido interno de servicios... -->
                </header>
            </section>

             <!-- Sección: Facturación -->
            {% if session['rol'] in ['administrador', 'asesor'] %}
            <section class="content-section hidden" id="factura-section">
                <header class="content-header">
                    <h1>Generar Factura</h1>
                     <form method="POST">
                        <label for="orden_id">Orden:</label>
                         <select name="orden_id" required>
            {% for orden in ordenes %}
                <option value="{{ orden.id }}">Orden #{{ orden.id }} - {{ orden.cliente }} ({{ orden.placa }})</option>
            {% endfor %}
             </select>

        <label for="subtotal">Subtotal:</label>
        <input type="number" step="0.01" name="subtotal" required>

        <button type="submit">Generar Factura</button>

           
    </form>
                </header>
            </section>
            {% endif %}


            <!-- Sección: Reportes -->
            <section class="content-section hidden" id="reportes-section">
                <header class="content-header">
                    <h1><i class="fas fa-chart-bar"></i> Reportes</h1>
                    <!-- Contenido interno de reportes... -->
                </header>
            </section>

            <!-- Sección: Configuración -->
            <section class="content-section hidden" id="configuracion-section">
                <header class="content-header">
                    <h1><i class="fas fa-cog"></i> Configuración</h1>
                    <!-- Contenido interno de configuración... -->
                </header>
            </section>
            {% endif %}
        </main>
    </div>
     <!-- Sección: Encuesta de Satisfacción -->
<section class="content-section hidden" id="encuesta-section">
    <header class="content-header">
        <h1><i class="fas fa-comments"></i> Encuesta de Satisfacción</h1>
         <h2>FORMULARIO DE SATISFACCION</h2>
    <form action="" method="post">
        <label>Nombre:</label><br>
        <input type="text" name="nombre" required><br><br>

        <label>Correo:</label><br>
        <input type="email" name="correo" required><br><br>

        <label>¿Encontraste fácilmente la información que buscabas?</label><br>
        <select name="p1">
            <option value="1">Si</option>
            <option value="2">No</option>
        </select><br><br>

        <label>¿Qué tan satisfecho estás con tu experiencia?</label><br>
        <select name="p2">
            <option value="1">Muy Malo</option>
            <option value="2">Malo</option>
            <option value="3">Regular</option>
            <option value="4">Bueno</option>
            <option value="5">Excelente</option>
        </select><br><br>

        <label>¿Qué te parece el diseño visual?</label><br>
        <select name="p3">
            <option value="1">Muy Malo</option>
            <option value="2">Malo</option>
            <option value="3">Regular</option>
            <option value="4">Bueno</option>
            <option value="5">Excelente</option>
        </select><br><br>

        <label>¿El proceso de compra fue claro y sencillo?</label><br>
        <select name="p4">
            <option value="SI">Sí</option>
            <option value="NO">No</option>
        </select><br><br>

        <label>¿Cuánto recomendarías nuestro sitio (1-10)?</label><br>
        <select name="p5">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select><br><br>

        <label>¿Por qué recomendarías nuestros servicios?</label><br>
        <textarea name="comentario1"></textarea><br><br>

        <label>¿Qué podríamos mejorar?</label><br>
        <textarea name="comentario2"></textarea><br><br>

        <input type="submit" style="color: red;" value="Enviar">
    </form>
    </header>
   
</section>

    <script>
    document.querySelectorAll('.sidebar-nav .nav-link').forEach(link => {
        link.addEventListener('click', function (e) {
            e.preventDefault();

            // Ocultar todas las secciones
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
            });

            // Mostrar la sección correspondiente al data-section
            const targetId = this.getAttribute('data-section') + '-section';
            const targetSection = document.getElementById(targetId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
            }
        });
    });
</script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>

    
</body>
</html>
